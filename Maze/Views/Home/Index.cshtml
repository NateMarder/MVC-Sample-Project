@using Maze.Controllers
@{
    ViewBag.Title = "Home Page";
}

<div class="login-container">
    <div class="row">

            @*IN*@
            <div class="col-md-6 cover">
                <h2>Sign In</h2>
                <form id="signin">
                    <div class="form-group row">
                        <label for="inputEmail3" class="sr-only">Email</label>
                        <div class="col-sm-12">
                            <input type="email" class="form-control" id="inputEmail3" placeholder="Email">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="inputPassword3" class="sr-only">Password</label>
                        <div class="col-sm-12">
                            <input type="password" class="form-control" id="inputPassword3" placeholder="Password">
                        </div>
                    </div>

                    <div class="form-group row">
                        <div class="col-sm-12 pull-right">
                            <button type="submit" class="btn btn-primary no-bs-fancystuff">Sign in</button>
                        </div>
                    </div>
                </form>
            </div>

            @*UP*@
            <div class="col-md-6 cover">
                <h2>Sign Up</h2>
                <form id="signup">
                    <div class="form-group row">
                        <label for="inputUserNamel4" class="sr-only">Name</label>
                        <div class="col-sm-12">
                            <input class="form-control" id="inputUserNamel4" placeholder="Name">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="inputEmail4" class="col-sm-2 col-form-label sr-only">Email</label>
                        <div class="col-sm-12">
                            <input type="email" class="form-control" id="inputEmail4" placeholder="Email">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="inputPassword4" class="col-sm-2 col-form-label sr-only">Password</label>
                        <div class="col-sm-12">
                            <input type="password" class="form-control" id="inputPassword4" placeholder="Password">
                        </div>
                    </div>

                    <div class="form-group row">
                        <div class="col-sm-10">
                            <button id="new-user-submit" type="submit" class="btn btn-primary change-color no-bs-fancystuff">Sign Up</button>
                        </div>
                    </div>
                </form>
            </div>

    </div>  
    
    <div class="row message-area">
        
    </div>
</div>



<script type="text/javascript">

    $("#signup").submit(function(e) {
        e.preventDefault();

        var newUserModel = {
            Name: $("#inputUserNamel4").val(),
            Email: $("#inputEmail4").val(),
            Password: $("#inputPassword4").val()
        };

        var url = window.location.href + "@Url.Action("AddNewUser", "Home")";
        console.log("\nhitting: " + url);
        console.log("  --> name: " +
            newUserModel.Name +
            ", email: " +
            newUserModel.Email +
            ", pw: " +
            newUserModel.Password);

        $.ajax({
            type: "POST",
            url: url,
            data: newUserModel,
            success: function(data) {
                console.log(data);
                if (response.statusCode === 200) {
                    $(".row.message-area").text("signup successful!");
                    setTimeout(function() {
                        $(".row.message-area").fadeOut(500, function() {
                            $(".row.message-area").text("");
                        });
                    }, 5000);
                }
            }
        });
    });



    $("#signin").submit(function(e) {
        e.preventDefault();

        var userLoginModel = {
            Email: $("#inputEmail3").val(),
            Password: $("#inputPassword3").val()
        };


         var url2 = @Url.Action("UserLogin","UserOperations"); 

        //GuestUser@gmail.com
        //GuestUser
        $.ajax({
            type: "POST",
            url: url2,
            data: userLoginModel,
            success: function(data) {

                if (response.statusCode === 200) {
                    console.log(data);
                    $(".row.message-area").text("Log in Successful!\n user: "+data.UserId);
                    setTimeout(function() {
                        $(".row.message-area").fadeOut(500, function() {
                            $(".row.message-area").text("");
                        });
                    }, 5000);
                }
            }
        });
    });
</script>